/*
 typeahead.js 0.10.0
 https://github.com/twitter/typeahead.js
 Copyright 2013 Twitter, Inc. and other contributors; Licensed MIT
*/
var $jscomp={scope:{},findInternal:function(g,e,l){g instanceof String&&(g=String(g));for(var p=g.length,q=0;q<p;q++){var r=g[q];if(e.call(l,r,q,g))return{i:q,v:r}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(g,e,l){if(l.get||l.set)throw new TypeError("ES3 does not support getters and setters.");g!=Array.prototype&&g!=Object.prototype&&(g[e]=l.value)};
$jscomp.getGlobal=function(g){return"undefined"!=typeof window&&window===g?g:"undefined"!=typeof global&&null!=global?global:g};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(g,e,l,p){if(e){l=$jscomp.global;g=g.split(".");for(p=0;p<g.length-1;p++){var q=g[p];q in l||(l[q]={});l=l[q]}g=g[g.length-1];p=l[g];e=e(p);e!=p&&null!=e&&$jscomp.defineProperty(l,g,{configurable:!0,writable:!0,value:e})}};
$jscomp.polyfill("Array.prototype.find",function(g){return g?g:function(e,g){return $jscomp.findInternal(this,e,g).v}},"es6-impl","es3");
(function(g){var e={isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(d){return!d||/^\s*$/.test(d)},escapeRegExChars:function(d){return d.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(d){return"string"===typeof d},isNumber:function(d){return"number"===typeof d},isArray:g.isArray,isFunction:g.isFunction,isObject:g.isPlainObject,isUndefined:function(d){return"undefined"===
typeof d},bind:g.proxy,each:function(d,e){g.each(d,function(b,c){return e(c,b)})},map:g.map,filter:g.grep,every:function(d,e){var b=!0;if(!d)return b;g.each(d,function(c,a){if(!(b=e.call(null,a,c,d)))return!1});return!!b},some:function(d,e){var b=!1;if(!d)return b;g.each(d,function(c,a){if(b=e.call(null,a,c,d))return!1});return!!b},mixin:g.extend,getUniqueId:function(){var d=0;return function(){return d++}}(),templatify:function(d){function e(){return String(d)}return g.isFunction(d)?d:e},defer:function(d){setTimeout(d,
0)},debounce:function(d,e,b){var c,a;return function(){var h=this,f=arguments,n;n=b&&!c;clearTimeout(c);c=setTimeout(function(){c=null;b||(a=d.apply(h,f))},e);n&&(a=d.apply(h,f));return a}},throttle:function(d,e){var b,c,a,h,f,n;f=0;n=function(){f=new Date;a=null;h=d.apply(b,c)};return function(){var g=new Date,k=e-(g-f);b=this;c=arguments;0>=k?(clearTimeout(a),a=null,f=g,h=d.apply(b,c)):a||(a=setTimeout(n,k));return h}},noop:function(){}},l=function(d,g){function b(a){this.maxSize=a||100;this.size=
0;this.hash={};this.list=new c}function c(){this.head=this.tail=null}function a(a,c){this.key=a;this.val=c;this.prev=this.next=null}e.mixin(b.prototype,{set:function(h,c){var f=this.list.tail;this.size>=this.maxSize&&(this.list.remove(f),delete this.hash[f.key]);(f=this.hash[h])?(f.val=c,this.list.moveToFront(f)):(f=new a(h,c),this.list.add(f),this.hash[h]=f,this.size++)},get:function(a){if(a=this.hash[a])return this.list.moveToFront(a),a.val}});e.mixin(c.prototype,{add:function(a){this.head&&(a.next=
this.head,this.head.prev=a);this.head=a;this.tail=this.tail||a},remove:function(a){a.prev?a.prev.next=a.next:this.head=a.next;a.next?a.next.prev=a.prev:this.tail=a.prev},moveToFront:function(a){this.remove(a);this.add(a)}});return b}(this),p=function(){function d(c){this.prefix=["__",c,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+this.prefix)}function g(c){return JSON.stringify(e.isUndefined(c)?null:c)}var b;try{b=window.localStorage,b.setItem("~~~","!"),b.removeItem("~~~")}catch(c){b=
null}e.mixin(d.prototype,b&&window.JSON?{_prefix:function(c){return this.prefix+c},_ttlKey:function(c){return this._prefix(c)+this.ttlKey},get:function(c){this.isExpired(c)&&this.remove(c);return JSON.parse(b.getItem(this._prefix(c)))},set:function(c,a,h){e.isNumber(h)?b.setItem(this._ttlKey(c),g((new Date).getTime()+h)):b.removeItem(this._ttlKey(c));return b.setItem(this._prefix(c),g(a))},remove:function(c){b.removeItem(this._ttlKey(c));b.removeItem(this._prefix(c));return this},clear:function(){var c,
a,h=[],f=b.length;for(c=0;c<f;c++)(a=b.key(c)).match(this.keyMatcher)&&h.push(a.replace(this.keyMatcher,""));for(c=h.length;c--;)this.remove(h[c]);return this},isExpired:function(c){c=JSON.parse(b.getItem(this._ttlKey(c)));return e.isNumber(c)&&(new Date).getTime()>c?!0:!1}}:{get:e.noop,set:e.noop,remove:e.noop,clear:e.noop,isExpired:e.noop});return d}(),q=function(){function d(a){a=a||{};this._send=a.send?k(a.send):g.ajax;this._get=a.rateLimiter?a.rateLimiter(this._get):this._get}function k(a){return function(c,
h){var f=g.Deferred();a(c,h,function(a){e.defer(function(){f.resolve(a)})},function(a){e.defer(function(){f.reject(a)})});return f}}var b=0,c={},a=6,h=new l(10);d.setMaxPendingRequests=function(c){a=c};d.resetCache=function(){h=new l(10)};e.mixin(d.prototype,{_get:function(f,d,e){function n(a){e&&e(a);h.set(f,a)}function g(){b--;delete c[f];m.onDeckRequestArgs&&(m._get.apply(m,m.onDeckRequestArgs),m.onDeckRequestArgs=null)}var m=this,k;(k=c[f])?k.done(n):b<a?(b++,c[f]=this._send(f,d).done(n).always(g)):
this.onDeckRequestArgs=[].slice.call(arguments,0)},get:function(a,c,b){var f;e.isFunction(c)&&(b=c,c={});(f=h.get(a))?e.defer(function(){b&&b(f)}):this._get(a,c,b);return!!f}});return d}(),r=function(){function d(a){a=a||{};a.datumTokenizer&&a.queryTokenizer||g.error("datumTokenizer and queryTokenizer are both required");this.datumTokenizer=a.datumTokenizer;this.queryTokenizer=a.queryTokenizer;this.datums=[];this.trie={ids:[],children:{}}}function k(a){a=e.filter(a,function(a){return!!a});return a=
e.map(a,function(a){return a.toLowerCase()})}function b(a){for(var c={},f=[],b=0;b<a.length;b++)c[a[b]]||(c[a[b]]=!0,f.push(a[b]));return f}function c(a,c){function f(a,c){return a-c}var h=0,b=0,d=[];a=a.sort(f);for(c=c.sort(f);h<a.length&&b<c.length;)a[h]<c[b]?h++:(a[h]>c[b]||(d.push(a[h]),h++),b++);return d}e.mixin(d.prototype,{bootstrap:function(a){this.datums=a.datums;this.trie=a.trie},add:function(a){var c=this;a=e.isArray(a)?a:[a];e.each(a,function(a){var b;b=c.datums.push(a)-1;a=k(c.datumTokenizer(a));
e.each(a,function(a){var h,f;h=c.trie;for(a=a.split("");f=a.shift();)h=h.children[f]||(h.children[f]={ids:[],children:{}}),h.ids.push(b)})})},get:function(a){var h=this,f;a=k(this.queryTokenizer(a));e.each(a,function(a){var b,d;if(f&&0===f.length)return!1;b=h.trie;for(a=a.split("");b&&(d=a.shift());)b=b.children[d];if(b&&0===a.length)b=b.ids.slice(0),f=f?c(f,b):b;else return f=[],!1});return f?e.map(b(f),function(a){return h.datums[a]}):[]},serialize:function(){return{datums:this.datums,trie:this.trie}}});
return d}(),u=function(){return{local:function(d){return d.local||null},prefetch:function(d){var k;k={url:null,thumbprint:"",ttl:864E5,filter:null,ajax:{}};if(d=d.prefetch||null)d=e.isString(d)?{url:d}:d,d=e.mixin(k,d),d.thumbprint="0.10.0"+d.thumbprint,d.ajax.method=d.ajax.method||"get",d.ajax.dataType=d.ajax.dataType||"json",!d.url&&g.error("prefetch requires url to be set");return d},remote:function(d){function k(a){return function(c){return e.debounce(c,a)}}function b(a){return function(c){return e.throttle(c,
a)}}var c;c={url:null,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}};if(d=d.remote||null)d=e.isString(d)?{url:d}:d,d=e.mixin(c,d),d.rateLimiter=/^throttle$/i.test(d.rateLimitBy)?b(d.rateLimitWait):k(d.rateLimitWait),d.ajax.method=d.ajax.method||"get",d.ajax.dataType=d.ajax.dataType||"json",delete d.rateLimitBy,delete d.rateLimitWait,!d.url&&g.error("remote requires url to be set");return d}}}();window.Bloodhound=function(){function d(c){c&&(c.local||
c.prefetch||c.remote)||g.error("one of local, prefetch, or remote is required");this.limit=c.limit||5;this.sorter=c.sorter||k;this.dupDetector=c.dupDetector||b;this.local=u.local(c);this.prefetch=u.prefetch(c);this.remote=u.remote(c);this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null;this.index=new r({datumTokenizer:c.datumTokenizer,queryTokenizer:c.queryTokenizer});this.storage=this.cacheKey?new p(this.cacheKey):null}function k(){return 0}function b(){return!1}d.tokenizers=
{whitespace:function(c){return c.split(/\s+/)},nonword:function(c){return c.split(/\W+/)}};e.mixin(d.prototype,{_loadPrefetch:function(c){function a(a){a=c.filter?c.filter(a):a;b.add(a);b._saveToStorage(b.index.serialize(),c.thumbprint,c.ttl)}var b=this,f;(f=this._readFromStorage(c.thumbprint))?(this.index.bootstrap(f),f=g.Deferred().resolve()):f=g.ajax(c.url,c.ajax).done(a);return f},_getFromRemote:function(c,a){var b=this,f;c=c||"";f=encodeURIComponent(c);f=this.remote.replace?this.remote.replace(this.remote.url,
c):this.remote.url.replace(this.remote.wildcard,f);return this.transport.get(f,this.remote.ajax,function(c){c=b.remote.filter?b.remote.filter(c):c;a(c)})},_saveToStorage:function(c,a,b){this.storage&&(this.storage.set("data",c,b),this.storage.set("protocol",location.protocol,b),this.storage.set("thumbprint",a,b))},_readFromStorage:function(c){var a,b,f;this.storage&&(a=this.storage.get("data"),b=this.storage.get("protocol"),f=this.storage.get("thumbprint"));isExpired=f!==c||b!==location.protocol;
return a&&!isExpired?a:null},initialize:function(){function c(){a.add(a.local)}var a=this,b;b=this.prefetch?this._loadPrefetch(this.prefetch):g.Deferred().resolve();this.local&&b.done(c);this.transport=this.remote?new q(this.remote):null;this.initialize=function(){return b.promise()};return b.promise()},add:function(c){this.index.add(c)},get:function(c,a){function b(c){var b=d.slice(0);e.each(c,function(a){!e.some(b,function(c){return f.dupDetector(a,c)})&&b.push(a);return b.length<f.limit});a&&a(b.sort(f.sorter))}
var f=this,d,g=!1;d=this.index.get(c).sort(this.sorter).slice(0,this.limit);d.length<this.limit&&this.transport&&(g=this._getFromRemote(c,b));!g&&a&&a(d)},ttAdapter:function(){return e.bind(this.get,this)}});return d}();var z={position:"relative",display:"inline-block"},A={position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},v={position:"relative",verticalAlign:"top",backgroundColor:"transparent"},B={position:"relative",verticalAlign:"top"},C={position:"absolute",top:"100%",
left:"0",zIndex:"100",display:"none"},D={display:"block"},E={whiteSpace:"normal"},F={left:"0",right:"auto"},G={left:"auto",right:" 0"};e.isMsie()&&e.mixin(v,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"});e.isMsie()&&7>=e.isMsie()&&e.mixin(v,{marginTop:"-1px"});var x=function(){function d(d){d&&d.el||g.error("EventBus initialized without el");this.$el=g(d.el)}e.mixin(d.prototype,{trigger:function(d){var b=[].slice.call(arguments,1);this.$el.trigger("typeahead:"+
d,b)}});return d}(),w=function(){function d(a,f,d,e){if(!d)return this;f=f.split(c);d=e?b(d,e):d;for(this._callbacks=this._callbacks||{};e=f.shift();)this._callbacks[e]=this._callbacks[e]||{sync:[],async:[]},this._callbacks[e][a].push(d);return this}function e(a,c,b){return function(){for(var f,d=0;!f&&d<a.length;d+=1)f=!1===a[d].apply(c,b);return!f}}function b(a,c){return a.bind?a.bind(c):function(){a.apply(c,[].slice.call(arguments,0))}}var c=/\s+/,a=function(){return window.setImmediate?function(a){setImmediate(function(){a()})}:
function(a){setTimeout(function(){a()},0)}}();return{onSync:function(a,c,b){return d.call(this,"sync",a,c,b)},onAsync:function(a,c,b){return d.call(this,"async",a,c,b)},off:function(a){var b;if(!this._callbacks)return this;for(a=a.split(c);b=a.shift();)delete this._callbacks[b];return this},trigger:function(b){var f,d,h,g,k;if(!this._callbacks)return this;b=b.split(c);for(h=[].slice.call(arguments,1);(f=b.shift())&&(d=this._callbacks[f]);)g=e(d.sync,this,[f].concat(h)),k=e(d.async,this,[f].concat(h)),
g()&&a(k);return this}}}(),H=function(d){function g(c,a,b){for(var f=[],d=0;d<c.length;d++)f.push(e.escapeRegExChars(c[d]));c=b?"\\b("+f.join("|")+")\\b":"("+f.join("|")+")";return a?new RegExp(c):new RegExp(c,"i")}var b={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(c){function a(c,b){for(var d,f=0;f<c.childNodes.length;f++)d=c.childNodes[f],3===d.nodeType?f+=b(d)?1:0:a(d,b)}var h;c=e.mixin({},b,c);c.node&&c.pattern&&(c.pattern=e.isArray(c.pattern)?
c.pattern:[c.pattern],h=g(c.pattern,c.caseSensitive,c.wordsOnly),a(c.node,function(a){var b,f;if(b=h.exec(a.data))wrapperNode=d.createElement(c.tagName),c.className&&(wrapperNode.className=c.className),f=a.splitText(b.index),f.splitText(b[0].length),wrapperNode.appendChild(f.cloneNode(!0)),a.parentNode.replaceChild(wrapperNode,f);return!!b}))}}(window.document),y=function(){function d(a){var b=this,d,n,m,l;a=a||{};a.input||g.error("input is missing");d=e.bind(this._onBlur,this);n=e.bind(this._onFocus,
this);m=e.bind(this._onKeydown,this);l=e.bind(this._onInput,this);this.$hint=g(a.hint);this.$input=g(a.input).on("blur.tt",d).on("focus.tt",n).on("keydown.tt",m);0===this.$hint.length&&(this.setHintValue=this.getHintValue=this.clearHint=e.noop);if(e.isMsie())this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(a){c[a.which||a.keyCode]||e.defer(e.bind(b._onInput,b,a))});else this.$input.on("input.tt",l);this.query=this.$input.val();this.$overflowHelper=k(this.$input)}function k(a){return g('<pre aria-hidden="true"></pre>').css({position:"absolute",
visibility:"hidden",whiteSpace:"nowrap",fontFamily:a.css("font-family"),fontSize:a.css("font-size"),fontStyle:a.css("font-style"),fontVariant:a.css("font-variant"),fontWeight:a.css("font-weight"),wordSpacing:a.css("word-spacing"),letterSpacing:a.css("letter-spacing"),textIndent:a.css("text-indent"),textRendering:a.css("text-rendering"),textTransform:a.css("text-transform")}).insertAfter(a)}function b(a){return a.altKey||a.ctrlKey||a.metaKey||a.shiftKey}var c;c={9:"tab",27:"esc",37:"left",39:"right",
13:"enter",38:"up",40:"down"};d.normalizeQuery=function(a){return(a||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")};e.mixin(d.prototype,w,{_onBlur:function(a){this.resetInputValue();this.trigger("blurred")},_onFocus:function(a){this.trigger("focused")},_onKeydown:function(a){var b=c[a.which||a.keyCode];this._managePreventDefault(b,a);b&&this._shouldTrigger(b,a)&&this.trigger(b+"Keyed",a)},_onInput:function(a){this._checkInputValue()},_managePreventDefault:function(a,c){var d,e;switch(a){case "tab":d=
this.getHintValue();e=this.getInputValue();d=d&&d!==e&&!b(c);break;case "up":case "down":d=!b(c);break;default:d=!1}d&&c.preventDefault()},_shouldTrigger:function(a,c){var d;switch(a){case "tab":d=!b(c);break;default:d=!0}return d},_checkInputValue:function(){var a,b,c;a=this.getInputValue();b=this.query;c=(b=d.normalizeQuery(a)===d.normalizeQuery(b))?this.query.length!==a.length:!1;b?c&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query=a)},focus:function(){this.$input.focus()},
blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(a){this.query=a},getInputValue:function(){return this.$input.val()},setInputValue:function(a,b){this.$input.val(a);!b&&this._checkInputValue()},getHintValue:function(){return this.$hint.val()},setHintValue:function(a){this.$hint.val(a)},resetInputValue:function(){this.$input.val(this.query)},clearHint:function(){this.$hint.val("")},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},
hasOverflow:function(){var a=this.$input.width()-2;this.$overflowHelper.text(this.getInputValue());return this.$overflowHelper.width()>=a},isCursorAtEnd:function(){var a,b;a=this.$input.val().length;b=this.$input[0].selectionStart;return e.isNumber(b)?b===a:document.selection?(b=document.selection.createRange(),b.moveStart("character",-a),a===b.text.length):!0},destroy:function(){this.$hint.off(".tt");this.$input.off(".tt");this.$hint=this.$input=this.$overflowHelper=null}});return d}(),t=function(){function d(b){b=
b||{};b.templates=b.templates||{};b.source||g.error("missing source");this.query=null;this.highlight=!!b.highlight;this.name=b.name||e.getUniqueId();this.source=b.source;this.valueKey=b.displayKey||"value";this.templates=k(b.templates,this.valueKey);this.$el=g('<div class="tt-dataset-%CLASS%"></div>'.replace("%CLASS%",this.name))}function k(b,c){function a(a){return"<p>"+a[c]+"</p>"}return{empty:b.empty&&e.templatify(b.empty),header:b.header&&e.templatify(b.header),footer:b.footer&&e.templatify(b.footer),
suggestion:b.suggestion||a}}d.extractDatasetName=function(b){return g(b).data("ttDataset")};d.extractValue=function(b){return g(b).data("ttValue")};d.extractDatum=function(b){return g(b).data("ttDatum")};e.mixin(d.prototype,w,{_render:function(b,c){function a(){var a;a=g('<span class="tt-suggestions"></span>').css(D).append(e.map(c,function(a){var b;b=k.templates.suggestion(a);b='<div class="tt-suggestion">%BODY%</div>'.replace("%BODY%",b);a=g(b).data("ttDataset",k.name).data("ttValue",a[k.valueKey]).data("ttDatum",
a);a.children().each(function(){g(this).css(E)});return a}));k.highlight&&H({node:a[0],pattern:b});return a}function d(){return k.templates.header({query:b,isEmpty:!m})}function f(){return k.templates.footer({query:b,isEmpty:!m})}if(this.$el){var k=this,m;this.$el.empty();m=c&&c.length;!m&&this.templates.empty?this.$el.html(k.templates.empty({query:b})).prepend(k.templates.header?d():null).append(k.templates.footer?f():null):m&&this.$el.html(a()).prepend(k.templates.header?d():null).append(k.templates.footer?
f():null);this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(b){var c=this;this.query=b;this.source(b,function(a){b===c.query&&c._render(b,a)})},clear:function(){this._render(this.query||"")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}});return d}(),I=function(){function d(b){var c=this,a,d,f,n,m;b=b||{};b.menu||g.error("menu is required");this.isOpen=!1;this.isEmpty=!0;this.isMouseOverDropdown=!1;this.datasets=e.map(b.datasets,k);
a=e.bind(this._onMouseEnter,this);d=e.bind(this._onMouseLeave,this);f=e.bind(this._onSuggestionClick,this);n=e.bind(this._onSuggestionMouseEnter,this);m=e.bind(this._onSuggestionMouseLeave,this);this.$menu=g(b.menu).on("mouseenter.tt",a).on("mouseleave.tt",d).on("click.tt",".tt-suggestion",f).on("mouseenter.tt",".tt-suggestion",n).on("mouseleave.tt",".tt-suggestion",m);e.each(this.datasets,function(a){c.$menu.append(a.getRoot());a.onSync("rendered",c._onRendered,c)})}function k(b){return new t(b)}
e.mixin(d.prototype,w,{_onMouseEnter:function(b){this.isMouseOverDropdown=!0},_onMouseLeave:function(b){this.isMouseOverDropdown=!1},_onSuggestionClick:function(b){this.trigger("suggestionClicked",g(b.currentTarget))},_onSuggestionMouseEnter:function(b){this._removeCursor();this._setCursor(g(b.currentTarget),!0)},_onSuggestionMouseLeave:function(b){this._removeCursor()},_onRendered:function(){(this.isEmpty=e.every(this.datasets,function(b){return b.isEmpty()}))?this._hide():this.isOpen&&this._show();
this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(b,c){b.first().addClass("tt-cursor");!c&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(b){var c,a;this.isOpen&&(a=this._getCursor(),c=this._getSuggestions(),
this._removeCursor(),b=c.index(a)+b,b=(b+1)%(c.length+1)-1,-1===b?this.trigger("cursorRemoved"):(-1>b&&(b=c.length-1),this._setCursor(c=c.eq(b)),this._ensureVisible(c)))},_ensureVisible:function(b){var c,a,d;c=b.position().top;b=c+b.outerHeight(!0);a=this.$menu.scrollTop();d=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10);0>c?this.$menu.scrollTop(a+c):d<b&&this.$menu.scrollTop(a+(b-d))},close:function(){this.isOpen&&(this.isOpen=this.isMouseOverDropdown=
!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(b){this.$menu.css("ltr"===b?F:G)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(b){var c=null;b.length&&(c={raw:t.extractDatum(b),value:t.extractValue(b),datasetName:t.extractDatasetName(b)});return c},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},
getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(b){e.each(this.datasets,function(c){c.update(b)})},empty:function(){e.each(this.datasets,function(b){b.clear()})},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){this.$menu.off(".tt");this.$menu=null;e.each(this.datasets,function(b){b.destroy()})}});return d}(),J=function(){function d(a){var b,c,d;a=a||{};a.input||g.error("missing input");this.autoselect=
!!a.autoselect;this.minLength=e.isNumber(a.minLength)?a.minLength:1;this.$node=k(a.input,a.withHint);b=this.$node.find(".tt-dropdown-menu");c=this.$node.find(".tt-input");d=this.$node.find(".tt-hint");this.eventBus=a.eventBus||new x({el:c});this.dropdown=(new I({menu:b,datasets:a.datasets})).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",
this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this);this.input=(new y({input:c,hint:d})).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",
this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this);b.on("mousedown.tt",function(a){e.isMsie()&&9>e.isMsie()&&(c[0].onbeforedeactivate=function(){window.event.returnValue=!1;c[0].onbeforedeactivate=null});a.preventDefault()})}function k(a,c){var d,e,h,k;d=g(a);e=g('<span class="twitter-typeahead"></span>').css(z);h=g('<span class="tt-dropdown-menu"></span>').css(C);k=d.clone().css(A).css(b(d));k.removeData().addClass("tt-hint").removeAttr("id name placeholder").prop("disabled",
!0).attr({autocomplete:"off",spellcheck:"false"});d.data("ttAttrs",{dir:d.attr("dir"),autocomplete:d.attr("autocomplete"),spellcheck:d.attr("spellcheck"),style:d.attr("style")});d.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(c?v:B);try{!d.attr("dir")&&d.attr("dir","auto")}catch(K){}return d.wrap(e).parent().prepend(c?k:null).append(h)}function b(a){return{backgroundAttachment:a.css("background-attachment"),backgroundClip:a.css("background-clip"),backgroundColor:a.css("background-color"),
backgroundImage:a.css("background-image"),backgroundOrigin:a.css("background-origin"),backgroundPosition:a.css("background-position"),backgroundRepeat:a.css("background-repeat"),backgroundSize:a.css("background-size")}}function c(a){var b=a.find(".tt-input");e.each(b.data("ttAttrs"),function(a,c){e.isUndefined(a)?b.removeAttr(c):b.attr(c,a)});b.detach().removeData("ttAttrs").removeClass("tt-input").insertAfter(a);a.remove()}e.mixin(d.prototype,{_onSuggestionClicked:function(a,b){var c;(c=this.dropdown.getDatumForSuggestion(b))&&
this._select(c)},_onCursorMoved:function(){var a=this.dropdown.getDatumForCursor();this.input.clearHint();this.input.setInputValue(a.value,!0);this.eventBus.trigger("cursorchanged",a.raw,a.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue();this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint();this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint();this.eventBus.trigger("closed")},_onFocused:function(){this.dropdown.open()},
_onBlurred:function(){!this.dropdown.isMouseOverDropdown&&this.dropdown.close()},_onEnterKeyed:function(a,b){var c,d;c=this.dropdown.getDatumForCursor();d=this.dropdown.getDatumForTopSuggestion();c?(this._select(c),b.preventDefault()):this.autoselect&&d&&(this._select(d),b.preventDefault())},_onTabKeyed:function(a,b){var c;(c=this.dropdown.getDatumForCursor())?(this._select(c),b.preventDefault()):this._autocomplete()},_onEscKeyed:function(){this.dropdown.close();this.input.resetInputValue()},_onUpKeyed:function(){var a=
this.input.getQuery();!this.dropdown.isOpen&&a.length>=this.minLength&&this.dropdown.update(a);this.dropdown.open();this.dropdown.moveCursorUp()},_onDownKeyed:function(){var a=this.input.getQuery();!this.dropdown.isOpen&&a.length>=this.minLength&&this.dropdown.update(a);this.dropdown.open();this.dropdown.moveCursorDown()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(a,b){this.input.clearHint();
this.dropdown.empty();b.length>=this.minLength&&this.dropdown.update(b);this.dropdown.open();this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint();this.dropdown.open()},_setLanguageDirection:function(){var a;this.dir!==(a=this.input.getLanguageDirection())&&(this.dir=a,this.$node.css("direction",a),this.dropdown.setLanguageDirection(a))},_updateHint:function(){var a,b,c;(a=this.dropdown.getDatumForTopSuggestion())&&this.dropdown.isVisible()&&!this.input.hasOverflow()&&(b=
this.input.getInputValue(),c=y.normalizeQuery(b),c=e.escapeRegExChars(c),c=new RegExp("^(?:"+c+")(.*$)","i"),a=c.exec(a.value),this.input.setHintValue(b+(a?a[1]:"")))},_autocomplete:function(){var a,b;a=this.input.getHintValue();b=this.input.getQuery();a&&b!==a&&this.input.isCursorAtEnd()&&((a=this.dropdown.getDatumForTopSuggestion())&&this.input.setInputValue(a.value),this.eventBus.trigger("autocompleted",a.raw,a.datasetName))},_select:function(a){this.input.clearHint();this.input.setQuery(a.value);
this.input.setInputValue(a.value,!0);this.dropdown.empty();this._setLanguageDirection();e.defer(e.bind(this.dropdown.close,this.dropdown));this.eventBus.trigger("selected",a.raw,a.datasetName)},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},getQuery:function(){return this.input.getQuery()},setQuery:function(a){this.input.setInputValue(a)},destroy:function(){this.input.destroy();this.dropdown.destroy();c(this.$node);this.$node=null}});return d}();(function(){var d;d=
{initialize:function(d){var b=[].slice.call(arguments,1);d=d||{};return this.each(function(){var c=g(this),a;e.each(b,function(a){a.highlight=!!d.highlight});a=new J({input:c,eventBus:new x({el:c}),withHint:e.isUndefined(d.hint)?!0:!!d.hint,minLength:d.minLength,autoselect:d.autoselect,datasets:b});c.data("ttTypeahead",a)})},open:function(){return this.each(function(){var d;(d=g(this).data("ttTypeahead"))&&d.open()})},close:function(){return this.each(function(){var d;(d=g(this).data("ttTypeahead"))&&
d.close()})},val:function(d){function b(){var a;(a=g(this).data("ttTypeahead"))&&a.setQuery(d)}function c(){var a,b;if(a=g(this).data("ttTypeahead"))b=a.getQuery();return b}return e.isString(d)?this.each(b):this.map(c).get()},destroy:function(){return this.each(function(){var d=g(this),b;if(b=d.data("ttTypeahead"))b.destroy(),d.removeData("ttTypeahead")})}};jQuery.fn.typeahead=function(e){return d[e]?d[e].apply(this,[].slice.call(arguments,1)):d.initialize.apply(this,arguments)}})()})(window.jQuery);
