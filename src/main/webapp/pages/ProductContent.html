<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>产品列表</title>
    <!-- Bootstrap -->
    <!--<link href="../dist/css/bootstrap.min.css" rel="stylesheet">-->
    <script src="../js/jquery.min.js"></script>
    <script src="../dist/js/bootstrap.min.js"></script>
    <!--<link href="../dist/css/patch.css" rel="stylesheet">-->
    <!--<link href="../dist/css/docs.min.css" rel="stylesheet">-->
    <!--&lt;!&ndash;[if lt IE 9]>
    <!--<script src="../js/ie8-responsive-file-warning.js"></script>-->
    <![endif]&ndash;&gt;-->
    <!--<script src="../js/ie-emulation-modes-warning.js"></script>-->
    <!--<script src="../js/angular.min.js"></script>-->
    <style>
        .modal{
            margin-top: 5%;
        }
        .tabclost{
            width: 10px;
            height: 10px;
            float: right;
            position: relative;
            z-index: 10;
            margin-right: 6px;
        }
    </style>
</head>
<body>
<ul id="myTab" class="nav nav-tabs">
    <li id="ProductListTab" class="active"><a href="#Content" data-toggle="tab">产品列表</a></li>
    <li id="editProductTab" class="hidden"><span class="tabclost"><a href="javascript:hiddenTab()">&times;</a></span><a href="#editProduct" data-toggle="tab">编辑产品</a></li>
</ul>
<h1 style="margin-top: 3%;width: 200px; margin-left: 11%;"></h1>
<div id="myTabContent" class="tab-content">
    <div class="tab-pane fade in active" id="Content">
        <!-- 数据查询模块 -->
        <form class="form-inline" style="text-align: right;">
            <div class="form-group">
<!--                 <label for="exampleInputName2">按名称查询</label> -->
                <input type="text" class="form-control" placeholder="输入名称,回车查询" ng-model="templateName" id="templateName">
            </div>
            <div class="form-group">
                <div class="dropdown">
                    <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenuStatue" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                        <h id="dropdownMenuStatuetitle" ng-model="userMode">按状态过滤</h>
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuStatue">
                        <li><a href="javascript:changedropdown('dropdownMenuStatuetitle','按状态过滤');">按状态过滤</a></li>
                        <li ng-repeat="userMode in UserModes"><a href="javascript:changedropdown('dropdownMenuStatuetitle','{{userMode}}');">{{userMode}}</a></li>
<!--                         <li><a href="javascript:changedropdown('dropdownMenuStatuetitle','独享');">独享</a></li> -->
<!--                         <li><a href="javascript:changedropdown('dropdownMenuStatuetitle','共享');">共享</a></li> -->
                    </ul>
                </div>
            </div>
            <div class="form-group">
                <div class="dropdown">
                    <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenuClass" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                        <h id="dropdownMenuClasstitle" ng-model=templateCategory>按分类过滤</h>
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuStatue">
                        <li><a href="javascript:changedropdown('dropdownMenuClasstitle','按分类过滤');">按分类过滤</a></li>
                        <li ng-repeat="cateGory in CateGorys"><a href="javascript:changedropdown('dropdownMenuClasstitle','{{cateGory}}');">{{cateGory}}</a></li>
<!--                         <li><a href="javascript:changedropdown('dropdownMenuClasstitle','新闻');">新闻</a></li> -->
<!--                         <li><a href="javascript:changedropdown('dropdownMenuClasstitle','故事');">故事</a></li> -->
                    </ul>
                </div>
            </div>
            <button type="button" class="btn btn-primary hidden" id="selectBtn" ng-click="selectData(templateName);">查询</button>
        </form>
        <br>
        <!-- 数据展示模块 -->
        <table class="table table-bordered table-hover">
            <thead>
            <tr>
                <th width="100px;" style="text-align: center">模板ID</th>
                <th width="80px;" style="text-align: center">版本号</th>
                <th width="400px;" style="text-align: center">产品名称</th>
                <th width="80px;" style="text-align: center">类型</th>
                <th width="80px;" style="text-align: center">分类</th>
                <th width="80px;" style="text-align: center">状态</th>
                <th width="80px;" style="text-align: center">是否已发布</th>
                <th width="80px;" style="text-align: center">操作</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="templates in datas">
                <th style="text-align: center">{{templates.templateId}}</th>
                <td style="text-align: center">{{templates.version}}</td>
                <td style="text-align: center">{{templates.templateName}}</td>
                <td style="text-align: center">{{templates.templateType}}</td>
                <td style="text-align: center">{{templates.templateCategory}}</td>
                <td style="text-align: center">{{templates.userMode}}</td>
                <td style="text-align: center" ng-if="templates.isPub == 1">已发布</td>
                <td style="text-align: center" ng-if="templates.isPub == 0">未发布</td>
                <td style="text-align: center">
                    <div class="btn-group">
                        <a href="javascript:showeditmodel('{{templates.templateId}}')" class="btn btn-default">编辑</a>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>
        <br>

        <!-- 分页模块 -->
        <nav aria-label="Page navigation" style="text-align: right;">
            <ul class="pagination">
                <li>
                    <a id="previous" href="javascript:void(0)" ng-click="changepage(previous)" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
                <li id="page{{pi}}" ng-repeat="pi in pageinfo" repeat-finish="renderFinish()"> 
                	<a href="javascript:void(0)" ng-click="changepage(pi)">{{pi}}</a>
                </li>
                <li>
                    <a id="next" href="javascript:void(0)" ng-click="changepage(next)" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>
    <div class="tab-pane fade" id="editProduct">
        <div class="form-horizontal">
            <div class="form-group" style="text-align: center;">
                <label for="exampleInputName2" class="col-sm-4 control-label">模板ID</label>
                <div class="col-sm-6">
                	<input type="hidden" id="id" value="">
                    <input type="text" class="form-control" id="modelId" placeholder="模板ID" Readonly>
                </div>
            </div>
            <div class="form-group">
                <label for="exampleInputEmail2" class="col-sm-4 control-label">版本号</label>
                <div class="col-sm-6">
                    <input type="text" class="form-control" id="versionId" placeholder="版本号" Readonly>
                </div>
            </div>
            <div class="form-group">
                <label for="exampleInputEmail2" class="col-sm-4 control-label">类型</label>
                <div class="col-sm-6">
                    <input type="text" class="form-control" id="producttype" placeholder="类型" Readonly>
                </div>
            </div>
            <div class="form-group">
                <label for="exampleInputEmail2" class="col-sm-4 control-label">产品名称</label>
                <div class="col-sm-6">
                    <input type="text" class="form-control" id="ProductName" placeholder="产品名称">
                </div>
            </div>
            <div class="form-group">
                <label for="exampleInputEmail2" class="col-sm-4 control-label">分类</label>
                <div class="col-sm-6">
                    <input type="text" class="form-control" id="productClass" placeholder="分类" Readonly>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-offset-4 col-sm-6">
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" id="ispub"> 向租户发布
                        </label>
                    </div>
                </div>
            </div>
            <br>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-primary" onclick="hiddenTab()">（首选项）关闭</button>
            <button type="button" class="btn btn-success" ng-click="edittemplate()">（成功）应用</button>
        </div>
    </div>
</div>

<script>
    function changedropdown(id,title)
    {
        $('#'+id).html(title);
        $('#selectBtn').click();
    }
    function showeditmodel(id)
    {
        $(jsondatas.resultObj).each(function (index,element){
            if(element.templateId == id)
            {
                $('#id').attr("value",element.id);
                $('#modelId').attr("value",id);
                $('#versionId').attr("value",element.version);
                $('#producttype').attr("value",element.templateType);
                $('#ProductName').attr("value",element.templateName);
                $('#productClass').attr("value",element.templateCategory);
                if(element.isPub == '1')
                {
                    $('#ispub').attr("checked","true");
                }else
                {
                    $('#ispub').removeAttr("checked");
                }
            }
        })
        $('#ProductListTab').attr('class','');
        $('#editProductTab').attr('class','active');
        $('#editProduct').attr('class','tab-pane fade in active');
        $('#Content').attr('class','tab-pane fade');
    }
    function hiddenTab()
    {
        $('#ProductListTab').attr('class','active');
        $('#editProductTab').attr('class','hidden');
        $('#editProduct').attr('class','tab-pane fade');
        $('#Content').attr('class','tab-pane fade in active');
    }
    $('#templateName').bind('keyup', function(event) {
		if (event.keyCode == "13") {
			$('#selectBtn').click();
		}
	});
</script>

<!--</html>-->