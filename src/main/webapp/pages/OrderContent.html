<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>订单列表</title>
    <!-- Bootstrap -->
    <!--<link href="../dist/css/bootstrap.min.css" rel="stylesheet">-->
    <script src="../js/jquery.min.js"></script>
    <script src="../js/common.js"></script>
    <script src="../dist/js/bootstrap.min.js"></script>
    <!--<link href="../dist/css/patch.css" rel="stylesheet">-->
    <!--<link href="../dist/css/docs.min.css" rel="stylesheet">-->
    <!--[if lt IE 9]>
    <!--<script src="../js/ie8-responsive-file-warning.js"></script>-->
    <![endif]-->
    <!--<script src="../js/ie-emulation-modes-warning.js"></script>-->
    <style>
        .modal{
            margin-top: 5%;
        }
        .tabclost{
            width: 10px;
            height: 10px;
            float: right;
            position: relative;
            z-index: 10;
            margin-right: 6px;
        }
    </style>
    <!--<script src="../js/angular.min.js"></script>-->
</head>
<body>
<ul id="myTab" class="nav nav-tabs">
    <!--<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>-->
    <li id="OrderListTab" class="active"><a href="#OrderList" data-toggle="tab">订单列表</a></li>
    <li id="OrderPassTab" class="hidden"><span class="tabclost"><a href="javascript:hiddenTab()">&times;</a></span><a href="#OrderPass" data-toggle="tab">订单审核</a></li>
</ul>
<h1 style="margin-top: 3%;width: 200px; margin-left: 11%;"></h1>
<div id="myTabContent" class="tab-content">
    <div class="tab-pane fade in active" id="OrderList">
        <!-- 数据查询模块 -->
        <form class="form-inline" style="text-align: right;">
            <div class="form-group">
<!--                 <label for="exampleInputName2">按租户名称查询</label> -->
                <input type="text" class="form-control" id="TenantName" ng-model="TenantName" placeholder="按租户名称查询">
            </div>
            <div class="form-group">
                <div class="dropdown">
                    <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenuStatue" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                        <h id="dropdownMenuStatuetitle" ng-model="statue" data="">按状态过滤</h>
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuStatue">
                        <li><a href="javascript:changedropdown('dropdownMenuStatuetitle','按状态过滤','');">按状态过滤</a></li>
                        <li><a href="javascript:changedropdown('dropdownMenuStatuetitle','待审核','0');">待审核</a></li>
                        <li><a href="javascript:changedropdown('dropdownMenuStatuetitle','通过','1');">通过</a></li>
                        <li><a href="javascript:changedropdown('dropdownMenuStatuetitle','驳回','2');">驳回</a></li>
                    </ul>
                </div>
            </div>
            <div class="form-group">
<!--                 <label for="exampleInputName2">按时间过滤</label> -->
                <input type="date" class="form-control" id="createTime" placeholder="按时间过滤" ng-model="createTime">
            </div>
            <button type="button" class="btn btn-primary" ng-click="selectData()">查询</button>
        </form>
        <br>
        <!-- 数据展示模块 -->
        <table class="table table-bordered table-hover">
            <thead>
            <tr>
                <th width=";" style="text-align: center">订单ID</th>
                <th width=";" style="text-align: center">下单时间</th>
                <th width=";" style="text-align: center">租户名称</th>
                <th width=";" style="text-align: center">状态</th>
            </tr>
            </thead>
            <tbody ng-repeat="order in datas">
            <tr>
                <th style="text-align: center"><a href="javascript:showinfo('{{order.id}}');">{{order.billNo}}</a></th>
                <td style="text-align: center">{{order.crateDate|date:"yyyy-MM-dd HH:mm:ss"}}</td>
                <td style="text-align: center">{{order.tenantId}}</td>
                <td style="text-align: center" ng-if="order.status==0">待审核</td>
                <td style="text-align: center" ng-if="order.status==1">通过</td>
                <td style="text-align: center" ng-if="order.status==2">驳回</td>
            </tr>
            </tbody>
        </table>
        <br>
        <!-- 分页模块 -->
        <nav aria-label="Page navigation" style="text-align: right;">
            <ul class="pagination">
               <li>
                    <a id="previous" href="javascript:void(0)" ng-click="changepage(previous)" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
                <li id="page{{pi}}" ng-repeat="pi in pageinfo" >
                	<a href="javascript:void(0)" ng-click="changepage(pi)">{{pi}}</a>
                </li>
                <li>
                    <a id="next" href="javascript:void(0)" ng-click="changepage(next)" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>
    <div class="tab-pane fade" id="OrderPass">
        <div class="modal-body">
        	<table class="table table-striped table-hover">
	            <tbody>
	            <input type="hidden" value="" id="id">
	            <tr>
	                <th width=";" style="text-align: center">订单ID</th>
	                <th width=";" style="text-align: center" id="OrderId"></th>
	            </tr>
	            <input type="hidden" value="" id="proid">
	            <tr>
	                <th width=";" style="text-align: center">下单时间</th>
	                <input type="hidden" value="" id="createDateNum">
	                <th width=";" style="text-align: center" id="CreateDate"></th>
	            </tr>
	            <tr>
	                <th width=";" style="text-align: center">租户名称</th>
	                <th width=";" style="text-align: center" id="perTenantName"></th>
	            </tr>
	            <tr>
	                <th width=";" style="text-align: center">状态</th>
	                <th width=";" style="text-align: center" id="statue"></th>
	            </tr>
	            <tr>
	                <th width=";" style="text-align: center">理由</th>
	                <th width=";" style="text-align: center">
	                	<textarea class="form-control" rows="3" id="resion"></textarea>
	                </th>
	            </tr>
	            </tbody>
	        </table>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-primary" onclick="hiddenTab()">关闭</button>
            <button type="button" id="passbtn" class="btn btn-success" ng-click="update(1)">通过</button>
            <button type="button" id="refursebtn" class="btn btn-warning" ng-click="update(2)">驳回</button>
        </div>
    </div>
</div>

</body>
<script>
    function changedropdown(id,title,value)
    {
        $('#'+id).html(title);
        $('#'+id).attr("data",value);
    }
    function showinfo(orderid)
    {
        $(jsondatas.resultObj).each(function (index,element){
            if(element.id == orderid)
            {
            	console.log(element);
                $('#OrderId').html(element.billNo);
                var time2 = new Date(element.crateDate).Format("yyyy-MM-dd hh:mm:ss");
                $('#createDateNum').attr("value",element.crateDate);
                $('#CreateDate').html(time2);
                $('#perTenantName').html(element.tenantId);
                if(element.status == 0)
                {
                	$('#statue').html("待审核");                	
                }else if(element.status == 1)
                {
                	$('#statue').html("通过");
                }else{
                	$('#statue').html("驳回");
                }
                $('#resion').html(element.approveDescibe);
                $('#id').attr("value",element.id);
                $('#proid').attr("value",element.proId);
//                 $('#passbtn').attr("ng-click","update("+element.id+")");
//                 $('#refursebtn').attr("ng-click","update("+element.id+")");
            }
        });
        $('#OrderListTab').attr('class','');
        $('#OrderPassTab').attr('class','active');
        $('#OrderPass').attr('class','tab-pane fade in active');
        $('#OrderList').attr('class','tab-pane fade');
    }
    function hiddenTab()
    {
        $('#OrderListTab').attr('class','active');
        $('#OrderPassTab').attr('class','hidden');
        $('#OrderPass').attr('class','tab-pane fade');
        $('#OrderList').attr('class','tab-pane fade in active');
    }
</script>
</html>